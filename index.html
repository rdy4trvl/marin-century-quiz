<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Marin Century — Find Your Route</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=Source+Serif+4:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
<style>
:root {
  --mc-navy: #0B2545;
  --mc-blue: #13497B;
  --mc-sky: #3E8EDE;
  --mc-light-blue: #D6E8F7;
  --mc-ice: #EEF4FB;
  --mc-green: #2A9D5C;
  --mc-green-dark: #1E7A45;
  --mc-red: #D93025;
  --mc-orange: #E8772E;
  --mc-gold: #F5B731;
  --mc-warm-white: #FAFAF8;
  --mc-white: #FFFFFF;
  --mc-gray-50: #F7F7F5;
  --mc-gray-100: #EDEDEA;
  --mc-gray-200: #D6D6D0;
  --mc-gray-400: #999990;
  --mc-gray-600: #5C5C56;
  --mc-gray-800: #2E2E2A;
  --mc-font-display: 'Outfit', sans-serif;
  --mc-font-body: 'Source Serif 4', Georgia, serif;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: var(--mc-font-body);
  background: var(--mc-warm-white);
  color: var(--mc-gray-800);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

/* ===== QUIZ CONTAINER ===== */
.mc-quiz {
  max-width: 680px;
  width: 100%;
  background: var(--mc-white);
  border-radius: 20px;
  box-shadow: 0 8px 40px rgba(11,37,69,0.08), 0 1px 3px rgba(11,37,69,0.06);
  overflow: hidden;
  position: relative;
}

/* ===== HEADER ===== */
.mc-quiz-header {
  background: var(--mc-navy);
  padding: 32px 36px 28px;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.mc-quiz-header::before {
  content: '';
  position: absolute;
  top: -40px; right: -40px;
  width: 160px; height: 160px;
  background: rgba(62,142,222,0.12);
  border-radius: 50%;
}
.mc-quiz-header::after {
  content: '';
  position: absolute;
  bottom: -20px; left: -20px;
  width: 100px; height: 100px;
  background: rgba(42,157,92,0.1);
  border-radius: 50%;
}

.mc-quiz-icon {
  font-size: 36px;
  margin-bottom: 8px;
  position: relative;
  z-index: 1;
}

.mc-quiz-title {
  font-family: var(--mc-font-display);
  font-weight: 800;
  font-size: 26px;
  color: var(--mc-white);
  letter-spacing: -0.02em;
  margin-bottom: 6px;
  position: relative;
  z-index: 1;
}

.mc-quiz-subtitle {
  font-family: var(--mc-font-display);
  font-weight: 400;
  font-size: 15px;
  color: var(--mc-light-blue);
  opacity: 0.85;
  position: relative;
  z-index: 1;
}

/* ===== PROGRESS BAR ===== */
.mc-quiz-progress {
  height: 4px;
  background: var(--mc-gray-100);
  position: relative;
}
.mc-quiz-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--mc-sky), var(--mc-green));
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  width: 0%;
  border-radius: 0 2px 2px 0;
}

/* ===== QUIZ BODY ===== */
.mc-quiz-body {
  padding: 36px;
  min-height: 380px;
  position: relative;
}

/* ===== QUESTION SCREENS ===== */
.mc-quiz-screen {
  display: none;
  animation: mcFadeSlideIn 0.4s ease forwards;
}
.mc-quiz-screen.mc-active { display: block; }

@keyframes mcFadeSlideIn {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

.mc-quiz-step {
  font-family: var(--mc-font-display);
  font-weight: 600;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--mc-sky);
  margin-bottom: 10px;
}

.mc-quiz-question {
  font-family: var(--mc-font-display);
  font-weight: 700;
  font-size: 22px;
  color: var(--mc-navy);
  line-height: 1.3;
  margin-bottom: 8px;
}

.mc-quiz-hint {
  font-family: var(--mc-font-display);
  font-size: 14px;
  color: var(--mc-gray-400);
  margin-bottom: 24px;
}

/* ===== ANSWER OPTIONS ===== */
.mc-quiz-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.mc-quiz-option {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 16px 20px;
  background: var(--mc-gray-50);
  border: 2px solid transparent;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  user-select: none;
}
.mc-quiz-option:hover {
  background: var(--mc-ice);
  border-color: var(--mc-light-blue);
  transform: translateX(4px);
}
.mc-quiz-option.mc-selected {
  background: var(--mc-ice);
  border-color: var(--mc-sky);
  box-shadow: 0 0 0 1px var(--mc-sky);
}

.mc-quiz-option-icon {
  font-size: 24px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--mc-white);
  border-radius: 10px;
  flex-shrink: 0;
  box-shadow: 0 1px 3px rgba(0,0,0,0.06);
}

.mc-quiz-option-text {
  flex: 1;
}
.mc-quiz-option-label {
  font-family: var(--mc-font-display);
  font-weight: 600;
  font-size: 16px;
  color: var(--mc-navy);
  line-height: 1.3;
}
.mc-quiz-option-desc {
  font-family: var(--mc-font-display);
  font-weight: 400;
  font-size: 13px;
  color: var(--mc-gray-400);
  margin-top: 2px;
}

/* ===== NAVIGATION ===== */
.mc-quiz-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 28px;
  padding-top: 20px;
  border-top: 1px solid var(--mc-gray-100);
}

.mc-quiz-btn {
  font-family: var(--mc-font-display);
  font-weight: 600;
  font-size: 15px;
  padding: 12px 28px;
  border-radius: 50px;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.mc-quiz-btn-back {
  background: transparent;
  color: var(--mc-gray-400);
  padding: 12px 16px;
}
.mc-quiz-btn-back:hover { color: var(--mc-navy); }

.mc-quiz-btn-next {
  background: var(--mc-sky);
  color: var(--mc-white);
  box-shadow: 0 2px 8px rgba(62,142,222,0.3);
}
.mc-quiz-btn-next:hover {
  background: var(--mc-blue);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(62,142,222,0.4);
}
.mc-quiz-btn-next:disabled {
  background: var(--mc-gray-200);
  color: var(--mc-gray-400);
  box-shadow: none;
  cursor: not-allowed;
  transform: none;
}

.mc-quiz-btn-next svg, .mc-quiz-btn-back svg {
  width: 16px; height: 16px;
  stroke: currentColor; stroke-width: 2.5; fill: none;
}

/* ===== RESULT SCREEN ===== */
.mc-quiz-result {
  text-align: center;
  animation: mcFadeSlideIn 0.5s ease forwards;
}

.mc-quiz-result-badge {
  display: inline-block;
  font-family: var(--mc-font-display);
  font-weight: 600;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  padding: 6px 16px;
  border-radius: 50px;
  margin-bottom: 16px;
}

.mc-quiz-result-name {
  font-family: var(--mc-font-display);
  font-weight: 800;
  font-size: 36px;
  color: var(--mc-navy);
  letter-spacing: -0.02em;
  margin-bottom: 4px;
}

.mc-quiz-result-stats {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin: 16px 0 20px;
  flex-wrap: wrap;
}

.mc-quiz-result-stat {
  text-align: center;
}
.mc-quiz-result-stat-value {
  font-family: var(--mc-font-display);
  font-weight: 700;
  font-size: 22px;
  color: var(--mc-navy);
}
.mc-quiz-result-stat-label {
  font-family: var(--mc-font-display);
  font-weight: 500;
  font-size: 12px;
  color: var(--mc-gray-400);
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

.mc-quiz-result-desc {
  font-size: 16px;
  line-height: 1.7;
  color: var(--mc-gray-600);
  max-width: 520px;
  margin: 0 auto 24px;
}

.mc-quiz-result-match {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-family: var(--mc-font-display);
  font-weight: 600;
  font-size: 14px;
  color: var(--mc-green);
  background: #E6F4EA;
  padding: 8px 18px;
  border-radius: 50px;
  margin-bottom: 24px;
}

.mc-quiz-register-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-family: var(--mc-font-display);
  font-weight: 700;
  font-size: 18px;
  color: var(--mc-white);
  background: var(--mc-green);
  padding: 16px 40px;
  border-radius: 50px;
  border: none;
  cursor: pointer;
  text-decoration: none;
  transition: all 0.2s ease;
  box-shadow: 0 4px 16px rgba(42,157,92,0.3);
}
.mc-quiz-register-btn:hover {
  background: var(--mc-green-dark);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(42,157,92,0.4);
  color: var(--mc-white);
}

.mc-quiz-result-alt {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid var(--mc-gray-100);
}
.mc-quiz-result-alt-label {
  font-family: var(--mc-font-display);
  font-weight: 500;
  font-size: 13px;
  color: var(--mc-gray-400);
  margin-bottom: 10px;
}
.mc-quiz-result-alt-routes {
  display: flex;
  justify-content: center;
  gap: 10px;
  flex-wrap: wrap;
}
.mc-quiz-alt-chip {
  font-family: var(--mc-font-display);
  font-weight: 600;
  font-size: 13px;
  color: var(--mc-blue);
  background: var(--mc-ice);
  padding: 6px 16px;
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.2s;
  border: 1px solid transparent;
}
.mc-quiz-alt-chip:hover {
  background: var(--mc-light-blue);
  border-color: var(--mc-sky);
}

.mc-quiz-retake {
  display: inline-block;
  margin-top: 16px;
  font-family: var(--mc-font-display);
  font-weight: 500;
  font-size: 14px;
  color: var(--mc-gray-400);
  cursor: pointer;
  transition: color 0.2s;
}
.mc-quiz-retake:hover { color: var(--mc-navy); }

/* ===== LEARN MORE LINK ===== */
.mc-quiz-learn-more-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-family: var(--mc-font-display);
  font-weight: 600;
  font-size: 15px;
  color: var(--mc-blue);
  background: var(--mc-ice);
  padding: 12px 32px;
  border-radius: 50px;
  border: 2px solid var(--mc-light-blue);
  text-decoration: none;
  transition: all 0.2s ease;
  margin-top: 12px;
}
.mc-quiz-learn-more-btn:hover {
  background: var(--mc-light-blue);
  border-color: var(--mc-sky);
  color: var(--mc-navy);
}

/* ===== RESPONSIVE ===== */
@media (max-width: 600px) {
  .mc-quiz-body { padding: 24px 20px; }
  .mc-quiz-header { padding: 24px 20px 20px; }
  .mc-quiz-title { font-size: 22px; }
  .mc-quiz-question { font-size: 19px; }
  .mc-quiz-result-name { font-size: 28px; }
  .mc-quiz-result-stats { gap: 16px; }
  .mc-quiz-option { padding: 14px 16px; gap: 12px; }
  .mc-quiz-register-btn { padding: 14px 32px; font-size: 16px; }
}
</style>
</head>
<body>

<div class="mc-quiz" id="mcRouteQuiz">

  <!-- HEADER -->
  <div class="mc-quiz-header">
    <div class="mc-quiz-icon">&#x1F6B4;</div>
    <div class="mc-quiz-title">Find Your Perfect Route</div>
    <div class="mc-quiz-subtitle">Answer 4 quick questions — we'll match you to your ideal Marin Century ride</div>
  </div>

  <!-- PROGRESS -->
  <div class="mc-quiz-progress">
    <div class="mc-quiz-progress-fill" id="mcQuizProgress"></div>
  </div>

  <!-- BODY -->
  <div class="mc-quiz-body">

    <!-- Q1: EXPERIENCE -->
    <div class="mc-quiz-screen mc-active" data-q="1">
      <div class="mc-quiz-step">Question 1 of 4</div>
      <div class="mc-quiz-question">What's the longest ride you've done?</div>
      <div class="mc-quiz-hint">Think about your longest single-day ride, not total weekly miles</div>
      <div class="mc-quiz-options">
        <div class="mc-quiz-option" data-value="1" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F331;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">Under 30 miles</div>
            <div class="mc-quiz-option-desc">Still building up my distance</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="2" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F333;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">30 – 60 miles</div>
            <div class="mc-quiz-option-desc">Comfortable with half-century distances</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="3" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x26F0;&#xFE0F;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">60 – 100 miles</div>
            <div class="mc-quiz-option-desc">I've done a metric century or more</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="4" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F525;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">100+ miles</div>
            <div class="mc-quiz-option-desc">Century rides are my thing</div>
          </div>
        </div>
      </div>
      <div class="mc-quiz-nav">
        <div></div>
        <button type="button" class="mc-quiz-btn mc-quiz-btn-next" disabled onclick="mcQuizNext()">
          Next <svg viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
        </button>
      </div>
    </div>

    <!-- Q2: CLIMBING -->
    <div class="mc-quiz-screen" data-q="2">
      <div class="mc-quiz-step">Question 2 of 4</div>
      <div class="mc-quiz-question">How do you feel about climbing?</div>
      <div class="mc-quiz-hint">Marin County has stunning scenery — some of it is uphill</div>
      <div class="mc-quiz-options">
        <div class="mc-quiz-option" data-value="1" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F60C;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">Keep it manageable</div>
            <div class="mc-quiz-option-desc">Rolling hills are fine, but I don't want to suffer</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="2" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F4AA;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">I can handle some serious hills</div>
            <div class="mc-quiz-option-desc">4,000–7,000 feet of climbing? Bring it on</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="3" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F3D4;&#xFE0F;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">The steeper the better</div>
            <div class="mc-quiz-option-desc">Iconic climbs like Mt. Tam? Sign me up</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="4" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F929;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">I want an epic challenge</div>
            <div class="mc-quiz-option-desc">10,000+ feet of climbing in a day sounds amazing</div>
          </div>
        </div>
      </div>
      <div class="mc-quiz-nav">
        <button type="button" class="mc-quiz-btn mc-quiz-btn-back" onclick="mcQuizBack()">
          <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg> Back
        </button>
        <button type="button" class="mc-quiz-btn mc-quiz-btn-next" disabled onclick="mcQuizNext()">
          Next <svg viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
        </button>
      </div>
    </div>

    <!-- Q3: GOAL -->
    <div class="mc-quiz-screen" data-q="3">
      <div class="mc-quiz-step">Question 3 of 4</div>
      <div class="mc-quiz-question">What's your #1 goal for the day?</div>
      <div class="mc-quiz-hint">No wrong answers — every route has incredible scenery and support</div>
      <div class="mc-quiz-options">
        <div class="mc-quiz-option" data-value="1" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F305;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">Soak in the scenery and have fun</div>
            <div class="mc-quiz-option-desc">Great rest stops, live music, beautiful roads</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="2" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F3AF;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">Hit a personal milestone</div>
            <div class="mc-quiz-option-desc">My first metric century, first century, or a big PR</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="3" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F3C6;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">Push my limits</div>
            <div class="mc-quiz-option-desc">I want to be challenged and feel accomplished</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="4" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F30B;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">Conquer something extraordinary</div>
            <div class="mc-quiz-option-desc">An all-day endurance feat I'll remember forever</div>
          </div>
        </div>
      </div>
      <div class="mc-quiz-nav">
        <button type="button" class="mc-quiz-btn mc-quiz-btn-back" onclick="mcQuizBack()">
          <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg> Back
        </button>
        <button type="button" class="mc-quiz-btn mc-quiz-btn-next" disabled onclick="mcQuizNext()">
          Next <svg viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
        </button>
      </div>
    </div>

    <!-- Q4: TIME -->
    <div class="mc-quiz-screen" data-q="4">
      <div class="mc-quiz-step">Question 4 of 4</div>
      <div class="mc-quiz-question">How long do you want to ride?</div>
      <div class="mc-quiz-hint">Include rest stops — the party starts when you cross the finish line</div>
      <div class="mc-quiz-options">
        <div class="mc-quiz-option" data-value="5" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F37B;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">0 hours</div>
            <div class="mc-quiz-option-desc">Just food, beer, cyclists and music</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="1" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x23F0;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">3 – 4 hours</div>
            <div class="mc-quiz-option-desc">Back in time for the afternoon party</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="2" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x2600;&#xFE0F;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">4 – 6 hours</div>
            <div class="mc-quiz-option-desc">A solid half-day ride with plenty of stops</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="3" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F31E;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">6 – 8 hours</div>
            <div class="mc-quiz-option-desc">I'm making a full day of it</div>
          </div>
        </div>
        <div class="mc-quiz-option" data-value="4" onclick="mcQuizSelect(this)">
          <div class="mc-quiz-option-icon">&#x1F303;</div>
          <div class="mc-quiz-option-text">
            <div class="mc-quiz-option-label">8+ hours — dawn to 5pm</div>
            <div class="mc-quiz-option-desc">The longer the better, I live for this</div>
          </div>
        </div>
      </div>
      <div class="mc-quiz-nav">
        <button type="button" class="mc-quiz-btn mc-quiz-btn-back" onclick="mcQuizBack()">
          <svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg> Back
        </button>
        <button type="button" class="mc-quiz-btn mc-quiz-btn-next" disabled onclick="mcQuizShowResult()">
          See My Route <svg viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"/></svg>
        </button>
      </div>
    </div>

    <!-- RESULT -->
    <div class="mc-quiz-screen" data-q="result" id="mcQuizResult"></div>

  </div>
</div>

<script>
(function() {

  // --- GOOGLE APPS SCRIPT LOGGING ---
  // Replace this URL with your deployed Apps Script web app URL
  var APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxjgdNh5j6MUq60qvzoWnRoLeORNgP47hCiJuHQNI5YSJ0QafJrst3kIsIDL_Av7mTZ/exec';

  function logQuizResult(answers, routeKey, matchPct) {
    if (APPS_SCRIPT_URL === 'YOUR_APPS_SCRIPT_URL_HERE') return; // skip if not configured
    var route = routes[routeKey];
    var payload = {
      timestamp: new Date().toISOString(),
      q1_longest_ride: answers[1] || '',
      q2_climbing: answers[2] || '',
      q3_goal: answers[3] || '',
      q4_time: answers[4] || '',
      recommended_route: route.name,
      match_pct: matchPct
    };
    try {
      fetch(APPS_SCRIPT_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
    } catch (e) { /* fail silently */ }
  }

  // --- ROUTE DATA ---
  var routes = {
    geronimo: {
      name: 'Geronimo',
      miles: '37',
      climbing: '2,269 ft',
      price: '$80',
      time: '3–4 hrs',
      difficulty: 'Beginner-Friendly',
      diffClass: 'easy',
      desc: 'Ride through the beautiful San Geronimo Valley and past Nicasio Reservoir, under the towering redwoods of Samuel P. Taylor State Park. One fully stocked rest stop with live music, plus two water stops. The perfect introduction to the Marin Century experience.',
      tagline: 'Beautiful scenery, totally achievable',
    },
    metric: {
      name: 'Metric Century',
      miles: '64',
      climbing: '4,309 ft',
      price: '$100',
      time: '4–6 hrs',
      difficulty: 'Moderate',
      diffClass: 'moderate',
      desc: 'Our most popular route. Travel through West Marin, past Nicasio Reservoir and along the scenic shores of Tomales Bay on Highway 1 to the country town of Tomales. Multiple well-stocked rest stops with live music at every one.',
      tagline: 'The fan favorite — scenic and satisfying',
    },
    century: {
      name: 'Century',
      miles: '100',
      climbing: '6,606 ft',
      price: '$110',
      time: '6–9 hrs',
      difficulty: 'Challenging',
      diffClass: 'challenging',
      desc: 'The classic hundred-miler. Tomales Bay views, rolling Chileno Valley Road, challenging Wilson Hill, plus bonus loops through the redwoods and the edges of Petaluma. A memorable, iconic day whether it\'s your first century or your fiftieth.',
      tagline: 'The iconic hundred — a day you\'ll never forget',
    },
    tam: {
      name: 'Mount Tam',
      miles: '92',
      climbing: '8,931 ft',
      price: '$120',
      time: '7–10 hrs',
      difficulty: 'Very Challenging',
      diffClass: 'challenging',
      desc: 'For experienced climbers who want the legendary Mt. Tamalpais ascent. Breathtaking summit views, one of the best descents in the Bay Area, and the satisfaction of conquering a Marin County icon. Serious climbing, serious reward.',
      tagline: 'Conquer the mountain, earn the views',
    },
    double: {
      name: 'Double Metric',
      miles: '127',
      climbing: '11,079 ft',
      price: '$140',
      time: '9–13 hrs',
      difficulty: 'Epic Endurance',
      diffClass: 'epic',
      desc: 'The ultimate challenge. Combines the best of West Marin with the Mt. Tam climb — 127 miles and over 11,000 feet of elevation gain. Strict time cutoffs apply. For experienced endurance riders who want to push their absolute limits.',
      tagline: 'The ultimate test — for those who dare',
    },
    volunteer: {
      name: 'Volunteer',
      miles: '0',
      climbing: '0 ft',
      price: 'Free',
      time: '~4 hrs',
      difficulty: 'More Memorable than Any Ride',
      diffClass: 'volunteer',
      desc: 'Why ride 100 miles when you can host the party for 2,500 of your closest cycling friends? Fuel riders with snacks, cheers, and high-fives at a rest stop. When the work is done, kick back with a well-earned meal, an ice-cold beer, and live music at the finish line — all on us. Plus you\'ll score an exclusive volunteer tee that says "I made the Marin Century happen." No spandex required.',
      tagline: 'Best seat in the house — no bike required',
    }
  };

  var diffColors = {
    easy: { bg: '#E6F4EA', color: '#1B7340' },
    moderate: { bg: '#FFF3E0', color: '#C66900' },
    challenging: { bg: '#FCE4EC', color: '#B71C1C' },
    epic: { bg: '#F3E5F5', color: '#7B1FA2' },
    volunteer: { bg: '#FFF8E1', color: '#E6A817' }
  };

  // --- SCORING MATRIX ---
  // Each answer adds points to [geronimo, metric, century, tam, double]
  var scoring = {
    1: { // Q1: Longest ride
      1: [5, 2, 0, 0, 0],
      2: [3, 5, 2, 1, 0],
      3: [0, 3, 5, 4, 2],
      4: [0, 1, 4, 4, 5]
    },
    2: { // Q2: Climbing
      1: [5, 3, 1, 0, 0],
      2: [1, 4, 5, 2, 1],
      3: [0, 1, 3, 5, 3],
      4: [0, 0, 2, 4, 5]
    },
    3: { // Q3: Goal
      1: [5, 4, 2, 1, 0],
      2: [2, 5, 4, 2, 1],
      3: [0, 2, 4, 5, 3],
      4: [0, 0, 2, 3, 5]
    },
    4: { // Q4: Time
      1: [5, 1, 0, 0, 0],
      2: [2, 5, 2, 1, 0],
      3: [0, 2, 5, 4, 2],
      4: [0, 0, 3, 3, 5]
    }
  };

  var answers = {};
  var currentQ = 1;
  var totalQ = 4;

  // --- QUIZ INTERACTION ---
  window.mcQuizSelect = function(el) {
    var screen = el.closest('.mc-quiz-screen');
    var qNum = screen.getAttribute('data-q');
    // Deselect siblings
    screen.querySelectorAll('.mc-quiz-option').forEach(function(opt) {
      opt.classList.remove('mc-selected');
    });
    el.classList.add('mc-selected');
    answers[qNum] = parseInt(el.getAttribute('data-value'));
    // Enable next button
    screen.querySelector('.mc-quiz-btn-next').disabled = false;
  };

  window.mcQuizNext = function() {
    if (currentQ >= totalQ) return;
    currentQ++;
    showScreen(currentQ);
    updateProgress();
  };

  window.mcQuizBack = function() {
    if (currentQ <= 1) return;
    currentQ--;
    showScreen(currentQ);
    updateProgress();
  };

  window.mcQuizShowResult = function() {
    var winnerKey, matchPct;

    // --- VOLUNTEER SHORT-CIRCUIT ---
    if (answers[4] === 5) {
      winnerKey = 'volunteer';
      matchPct = 100;
      var route = routes[winnerKey];
      var dc = diffColors[route.diffClass];

      var html = '<div class="mc-quiz-result">' +
        '<div class="mc-quiz-result-badge" style="background:' + dc.bg + ';color:' + dc.color + ';">' + route.difficulty + '</div>' +
        '<div class="mc-quiz-result-name">' + route.name + '</div>' +
        '<p style="font-family:var(--mc-font-display);font-size:15px;color:var(--mc-gray-400);margin-bottom:4px;">' + route.tagline + '</p>' +
        '<div class="mc-quiz-result-stats">' +
          '<div class="mc-quiz-result-stat"><div class="mc-quiz-result-stat-value">' + route.miles + '</div><div class="mc-quiz-result-stat-label">Miles</div></div>' +
          '<div class="mc-quiz-result-stat"><div class="mc-quiz-result-stat-value">' + route.climbing + '</div><div class="mc-quiz-result-stat-label">Climbing</div></div>' +
          '<div class="mc-quiz-result-stat"><div class="mc-quiz-result-stat-value">' + route.time + '</div><div class="mc-quiz-result-stat-label">Est. Time</div></div>' +
        '</div>' +
        '<div class="mc-quiz-result-match">&#x2705; ' + matchPct + '% match for you</div>' +
        '<p class="mc-quiz-result-desc">' + route.desc + '</p>' +
        '<a href="https://marincentury.com" class="mc-quiz-register-btn" style="background:var(--mc-gold);box-shadow:0 4px 16px rgba(229,168,23,0.3);">&#x1F64C; Volunteer for the Marin Century</a>' +
        '<a href="https://marincentury.com" class="mc-quiz-learn-more-btn" target="_blank">&#x1F30A; Learn more at marincentury.com</a>' +
        '<div class="mc-quiz-retake" onclick="mcQuizRetake()">&#x21BB; Retake quiz</div>' +
      '</div>';

      document.getElementById('mcQuizResult').innerHTML = html;
      logQuizResult(answers, winnerKey, matchPct);
      showScreen('result');
      document.getElementById('mcQuizProgress').style.width = '100%';
      return;
    }

    // --- NORMAL SCORING ---
    var routeKeys = ['geronimo', 'metric', 'century', 'tam', 'double'];
    var scores = [0, 0, 0, 0, 0];

    for (var q = 1; q <= totalQ; q++) {
      var val = answers[q];
      if (val && scoring[q] && scoring[q][val]) {
        var pts = scoring[q][val];
        for (var i = 0; i < 5; i++) {
          scores[i] += pts[i];
        }
      }
    }

    // Experience guard: Under 30 mi or 30-60 mi cannot be matched to Mt Tam or Double Metric
    if (answers[1] === 1 || answers[1] === 2) {
      scores[3] = 0; // tam
      scores[4] = 0; // double
    }

    // Find winner
    var maxScore = Math.max.apply(null, scores);
    var winnerIdx = scores.indexOf(maxScore);
    winnerKey = routeKeys[winnerIdx];
    var route = routes[winnerKey];
    var dc = diffColors[route.diffClass];

    // Get match percentage (normalize to 80-99 range)
    var totalPossible = totalQ * 5;
    matchPct = Math.round(80 + (scores[winnerIdx] / totalPossible) * 19);

    // Get runner-up routes
    var ranked = routeKeys.map(function(key, i) { return { key: key, score: scores[i] }; })
      .sort(function(a, b) { return b.score - a.score; });
    var alts = ranked.filter(function(r) { return r.key !== winnerKey; }).slice(0, 2);

    // Build result HTML
    var html = '<div class="mc-quiz-result">' +
      '<div class="mc-quiz-result-badge" style="background:' + dc.bg + ';color:' + dc.color + ';">' + route.difficulty + '</div>' +
      '<div class="mc-quiz-result-name">' + route.name + '</div>' +
      '<p style="font-family:var(--mc-font-display);font-size:15px;color:var(--mc-gray-400);margin-bottom:4px;">' + route.tagline + '</p>' +
      '<div class="mc-quiz-result-stats">' +
        '<div class="mc-quiz-result-stat"><div class="mc-quiz-result-stat-value">' + route.miles + '</div><div class="mc-quiz-result-stat-label">Miles</div></div>' +
        '<div class="mc-quiz-result-stat"><div class="mc-quiz-result-stat-value">' + route.climbing + '</div><div class="mc-quiz-result-stat-label">Climbing</div></div>' +
        '<div class="mc-quiz-result-stat"><div class="mc-quiz-result-stat-value">' + route.time + '</div><div class="mc-quiz-result-stat-label">Est. Time</div></div>' +
      '</div>' +
      '<div class="mc-quiz-result-match">&#x2705; ' + matchPct + '% match for you</div>' +
      '<p class="mc-quiz-result-desc">' + route.desc + '</p>' +
      '<a href="https://marincentury.redpodium.com/2026-marin-century?_gl=1*145pykm*_ga*MTk0OTE1NjY0NC4xNzY4MzUyNjIw*_ga_D8T7SPST03*czE3NzEyMDU4NDAkbzI4JGcwJHQxNzcxMjA1ODQwJGo2MCRsMCRoMA.." class="mc-quiz-register-btn">&#x1F6B4; Register for the ' + route.name + '</a>' +
      '<a href="https://marincentury.com" class="mc-quiz-learn-more-btn" target="_blank">&#x1F30A; Learn more at marincentury.com</a>' +
      '<div class="mc-quiz-result-alt">' +
        '<div class="mc-quiz-result-alt-label">Also a great fit for you</div>' +
        '<div class="mc-quiz-result-alt-routes">' +
          alts.map(function(a) {
            var r = routes[a.key];
            return '<span class="mc-quiz-alt-chip" onclick="mcQuizShowAlt(\'' + a.key + '\')">' + r.name + ' (' + r.miles + ' mi)</span>';
          }).join('') +
        '</div>' +
      '</div>' +
      '<div class="mc-quiz-retake" onclick="mcQuizRetake()">&#x21BB; Retake quiz</div>' +
    '</div>';

    document.getElementById('mcQuizResult').innerHTML = html;
    logQuizResult(answers, winnerKey, matchPct);
    showScreen('result');
    // Full progress
    document.getElementById('mcQuizProgress').style.width = '100%';
  };

  window.mcQuizShowAlt = function(key) {
    var route = routes[key];
    var dc = diffColors[route.diffClass];

    var html = '<div class="mc-quiz-result">' +
      '<div class="mc-quiz-result-badge" style="background:' + dc.bg + ';color:' + dc.color + ';">' + route.difficulty + '</div>' +
      '<div class="mc-quiz-result-name">' + route.name + '</div>' +
      '<p style="font-family:var(--mc-font-display);font-size:15px;color:var(--mc-gray-400);margin-bottom:4px;">' + route.tagline + '</p>' +
      '<div class="mc-quiz-result-stats">' +
        '<div class="mc-quiz-result-stat"><div class="mc-quiz-result-stat-value">' + route.miles + '</div><div class="mc-quiz-result-stat-label">Miles</div></div>' +
        '<div class="mc-quiz-result-stat"><div class="mc-quiz-result-stat-value">' + route.climbing + '</div><div class="mc-quiz-result-stat-label">Climbing</div></div>' +
        '<div class="mc-quiz-result-stat"><div class="mc-quiz-result-stat-value">' + route.time + '</div><div class="mc-quiz-result-stat-label">Est. Time</div></div>' +
      '</div>' +
      '<p class="mc-quiz-result-desc">' + route.desc + '</p>' +
      '<a href="https://marincentury.redpodium.com/2026-marin-century?_gl=1*145pykm*_ga*MTk0OTE1NjY0NC4xNzY4MzUyNjIw*_ga_D8T7SPST03*czE3NzEyMDU4NDAkbzI4JGcwJHQxNzcxMjA1ODQwJGo2MCRsMCRoMA.." class="mc-quiz-register-btn">&#x1F6B4; Register for the ' + route.name + '</a>' +
      '<a href="https://marincentury.com" class="mc-quiz-learn-more-btn" target="_blank">&#x1F30A; Learn more at marincentury.com</a>' +
      '<div style="margin-top:20px;">' +
        '<div class="mc-quiz-retake" onclick="mcQuizRetake()">&#x21BB; Retake quiz</div>' +
      '</div>' +
    '</div>';

    document.getElementById('mcQuizResult').innerHTML = html;
    // Re-trigger animation
    var resultScreen = document.querySelector('[data-q="result"]');
    resultScreen.style.animation = 'none';
    void resultScreen.offsetWidth;
    resultScreen.style.animation = '';
  };

  window.mcQuizRetake = function() {
    answers = {};
    currentQ = 1;
    // Reset all selections
    document.querySelectorAll('.mc-quiz-option').forEach(function(opt) {
      opt.classList.remove('mc-selected');
    });
    document.querySelectorAll('.mc-quiz-btn-next').forEach(function(btn) {
      btn.disabled = true;
    });
    showScreen(1);
    updateProgress();
  };

  function showScreen(q) {
    document.querySelectorAll('.mc-quiz-screen').forEach(function(s) {
      s.classList.remove('mc-active');
      s.style.animation = 'none';
    });
    var target = document.querySelector('[data-q="' + q + '"]');
    if (target) {
      void target.offsetWidth; // force reflow for animation
      target.style.animation = '';
      target.classList.add('mc-active');
    }
  }

  function updateProgress() {
    var pct = ((currentQ - 1) / totalQ) * 100;
    document.getElementById('mcQuizProgress').style.width = pct + '%';
  }

})();
</script>

</body>
</html>
